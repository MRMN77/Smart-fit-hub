<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>داشبورد مربی - SMART FIT</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- استایل اختصاصی -->
    <link rel="stylesheet" href="../assets/css/main.css">

    <style>
        .coach-dashboard {
            padding: 20px;
        }

        .coach-header {
            background: linear-gradient(135deg, #4bb543 0%, #2e7d32 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .athlete-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .athlete-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
        }

        .athlete-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
        }

        .progress-ring {
            width: 80px;
            height: 80px;
        }

        .workout-plan-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border-right: 4px solid #4bb543;
        }

        .badge-coach {
            background: #4bb543;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
        }
    </style>
</head>

<body>
    <!-- ناوبری -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background: linear-gradient(135deg, #4bb543 0%, #2e7d32 100%);">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                <i class="fas fa-user-tie me-2"></i>
                داشبورد مربی SMART FIT
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCoach">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCoach">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">
                            <i class="fas fa-tachometer-alt me-1"></i>داشبورد
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#athletes">
                            <i class="fas fa-users me-1"></i>ورزشکاران
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#workouts">
                            <i class="fas fa-dumbbell me-1"></i>برنامه‌ها
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#schedule">
                            <i class="fas fa-calendar-alt me-1"></i>زمان‌بندی
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="profile.html">
                            <i class="fas fa-user me-1"></i>پروفایل
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-warning" href="login.html">
                            <i class="fas fa-sign-out-alt me-1"></i>خروج
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="coach-dashboard container mt-4">
        <!-- هدر داشبورد -->
        <div class="coach-header">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h2 class="fw-bold">
                        <i class="fas fa-user-tie me-2"></i>
                        سلام، مربی محترم!
                    </h2>
                    <p class="mb-0 opacity-90">
                        به پنل مدیریت ورزشکاران خوش آمدید. امروز ۵ جلسه تمرینی دارید.
                    </p>
                </div>
                <div class="col-md-4 text-md-end">
                    <span class="badge-coach">
                        <i class="fas fa-badge-check me-1"></i>مربی تاییدشده
                    </span>
                </div>
            </div>
        </div>

        <!-- آمار کلی -->
        <div class="row mb-4">
            <div class="col-md-3 col-6 mb-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <div class="text-success fs-1">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3 class="mt-2" id="total-athletes">۱۲</h3>
                        <p class="text-muted mb-0">ورزشکار فعال</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <div class="text-primary fs-1">
                            <i class="fas fa-dumbbell"></i>
                        </div>
                        <h3 class="mt-2" id="active-plans">۲۸</h3>
                        <p class="text-muted mb-0">برنامه فعال</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <div class="text-warning fs-1">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <h3 class="mt-2" id="today-sessions">۵</h3>
                        <p class="text-muted mb-0">جلسه امروز</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <div class="text-danger fs-1">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <h3 class="mt-2" id="goals-achieved">۴۷</h3>
                        <p class="text-muted mb-0">هدف محقق شده</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- بخش ورزشکاران -->
        <div class="card mb-4" id="athletes">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">
                    <i class="fas fa-users me-2 text-success"></i>
                    ورزشکاران تحت نظر
                </h5>
                <button class="btn btn-success btn-sm">
                    <i class="fas fa-plus me-1"></i>افزودن ورزشکار
                </button>
            </div>
            <div class="card-body">
                <div class="row" id="athletes-list">
                    <!-- ورزشکاران به صورت داینامیک لود می‌شن -->
                </div>
            </div>
        </div>

        <!-- برنامه‌های امروز -->
        <div class="row mb-4">
            <div class="col-lg-8">
                <div class="card h-100" id="workouts">
                    <div class="card-header bg-white">
                        <h5 class="mb-0">
                            <i class="fas fa-dumbbell me-2 text-primary"></i>
                            برنامه‌های تمرینی امروز
                        </h5>
                    </div>
                    <div class="card-body">
                        <div id="today-workouts">
                            <!-- برنامه‌های امروز -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card h-100">
                    <div class="card-header bg-white">
                        <h5 class="mb-0">
                            <i class="fas fa-chart-line me-2 text-warning"></i>
                            پیشرفت کلی
                        </h5>
                    </div>
                    <div class="card-body">
                        <canvas id="coach-progress-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- برنامه‌های آماده -->
        <div class="card mb-4">
            <div class="card-header bg-white">
                <h5 class="mb-0">
                    <i class="fas fa-clipboard-list me-2 text-info"></i>
                    برنامه‌های آماده
                </h5>
            </div>
            <div class="card-body">
                <div class="row" id="workout-templates">
                    <!-- برنامه‌های آماده -->
                </div>
            </div>
        </div>
    </div>

    <!-- اسکریپت‌ها -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/script.js"></script>
    <!-- چت بات هوشمند -->
    <script src="../assets/js/chatbot.js"></script>

    <script>
        // داده‌های نمونه برای مربی
        const coachData = {
            athletes: [{
                    id: 1,
                    name: 'علی محمدی',
                    level: 'پیشرفته',
                    progress: 85,
                    lastWorkout: 'دیروز',
                    goal: 'عضله‌سازی'
                },
                {
                    id: 2,
                    name: 'مریم کریمی',
                    level: 'متوسط',
                    progress: 65,
                    lastWorkout: 'امروز',
                    goal: 'کاهش وزن'
                },
                {
                    id: 3,
                    name: 'رضا احمدی',
                    level: 'مبتدی',
                    progress: 45,
                    lastWorkout: '۲ روز پیش',
                    goal: 'تناسب اندام'
                },
                {
                    id: 4,
                    name: 'سارا حسینی',
                    level: 'پیشرفته',
                    progress: 90,
                    lastWorkout: 'امروز',
                    goal: 'آمادگی مسابقه'
                },
                {
                    id: 5,
                    name: 'امید جعفری',
                    level: 'متوسط',
                    progress: 70,
                    lastWorkout: 'دیروز',
                    goal: 'افزایش قدرت'
                },
                {
                    id: 6,
                    name: 'نازنین رضایی',
                    level: 'مبتدی',
                    progress: 30,
                    lastWorkout: '۳ روز پیش',
                    goal: 'سلامت عمومی'
                }
            ],
            todayWorkouts: [{
                    time: '۸:۰۰',
                    athlete: 'مریم کریمی',
                    type: 'کاردیو',
                    duration: '۴۵ دقیقه'
                },
                {
                    time: '۱۰:۰۰',
                    athlete: 'سارا حسینی',
                    type: 'وزنه‌برداری',
                    duration: '۶۰ دقیقه'
                },
                {
                    time: '۱۴:۰۰',
                    athlete: 'امید جعفری',
                    type: 'کراس فیت',
                    duration: '۵۰ دقیقه'
                },
                {
                    time: '۱۶:۰۰',
                    athlete: 'علی محمدی',
                    type: 'تمرین قدرتی',
                    duration: '۷۰ دقیقه'
                },
                {
                    time: '۱۸:۰۰',
                    athlete: 'گروهی',
                    type: 'یوگا',
                    duration: '۶۰ دقیقه'
                }
            ],
            workoutTemplates: [{
                    name: 'برنامه کاهش وزن',
                    level: 'متوسط',
                    duration: '۸ هفته',
                    focus: 'کاردیو'
                },
                {
                    name: 'برنامه عضله‌سازی',
                    level: 'پیشرفته',
                    duration: '۱۲ هفته',
                    focus: 'وزنه'
                },
                {
                    name: 'برنامه مبتدی',
                    level: 'مبتدی',
                    duration: '۴ هفته',
                    focus: 'آمادگی'
                },
                {
                    name: 'برنامه حرفه‌ای',
                    level: 'حرفه‌ای',
                    duration: '۱۶ هفته',
                    focus: 'قدرت'
                }
            ]
        };

        // راه‌اندازی داشبورد مربی
        document.addEventListener('DOMContentLoaded', function() {
            // لود ورزشکاران
            loadAthletes();

            // لود برنامه‌های امروز
            loadTodayWorkouts();

            // لود برنامه‌های آماده
            loadWorkoutTemplates();

            // ایجاد نمودار
            createProgressChart();

            // تنظیم آمار
            updateStats();
        });

        function loadAthletes() {
            const container = document.getElementById('athletes-list');
            if (!container) return;

            container.innerHTML = '';

            coachData.athletes.forEach(athlete => {
                const progressColor = athlete.progress >= 80 ? 'success' :
                    athlete.progress >= 60 ? 'primary' :
                    athlete.progress >= 40 ? 'warning' : 'danger';

                const athleteHTML = `
                    <div class="col-md-6 col-lg-4 mb-3">
                        <div class="athlete-card">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="athlete-avatar me-3">
                                        ${athlete.name.charAt(0)}
                                    </div>
                                    <div>
                                        <h6 class="mb-1">${athlete.name}</h6>
                                        <span class="badge bg-${athlete.level === 'پیشرفته' ? 'success' : 
                                                               athlete.level === 'متوسط' ? 'primary' : 'secondary'}">
                                            ${athlete.level}
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <small class="text-muted">هدف: ${athlete.goal}</small>
                                    <div class="progress mt-1" style="height: 8px;">
                                        <div class="progress-bar bg-${progressColor}" 
                                             style="width: ${athlete.progress}%"></div>
                                    </div>
                                    <small class="text-muted d-block mt-1">
                                        پیشرفت: ${athlete.progress}%
                                    </small>
                                </div>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">
                                        <i class="fas fa-history me-1"></i>
                                        آخرین تمرین: ${athlete.lastWorkout}
                                    </small>
                                    <button class="btn btn-outline-primary btn-sm">
                                        <i class="fas fa-eye me-1"></i>مشاهده
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                container.insertAdjacentHTML('beforeend', athleteHTML);
            });
        }

        function loadTodayWorkouts() {
            const container = document.getElementById('today-workouts');
            if (!container) return;

            container.innerHTML = '';

            coachData.todayWorkouts.forEach(workout => {
                const workoutHTML = `
                    <div class="workout-plan-card mb-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-1">
                                    <i class="fas fa-clock me-2 text-primary"></i>
                                    ${workout.time} - ${workout.athlete}
                                </h6>
                                <div class="d-flex gap-3 mt-2">
                                    <span class="badge bg-info">
                                        <i class="fas fa-dumbbell me-1"></i>
                                        ${workout.type}
                                    </span>
                                    <span class="badge bg-secondary">
                                        <i class="fas fa-hourglass-half me-1"></i>
                                        ${workout.duration}
                                    </span>
                                </div>
                            </div>
                            <div>
                                <button class="btn btn-success btn-sm">
                                    <i class="fas fa-check me-1"></i>تایید
                                </button>
                                <button class="btn btn-outline-secondary btn-sm ms-2">
                                    <i class="fas fa-edit me-1"></i>ویرایش
                                </button>
                            </div>
                        </div>
                    </div>
                `;

                container.insertAdjacentHTML('beforeend', workoutHTML);
            });
        }

        function loadWorkoutTemplates() {
            const container = document.getElementById('workout-templates');
            if (!container) return;

            container.innerHTML = '';

            coachData.workoutTemplates.forEach(template => {
                const levelColor = template.level === 'پیشرفته' ? 'danger' :
                    template.level === 'متوسط' ? 'warning' : 'success';

                const templateHTML = `
                    <div class="col-md-6 col-lg-3 mb-3">
                        <div class="card h-100">
                            <div class="card-body">
                                <h6 class="card-title">${template.name}</h6>
                                <div class="mb-3">
                                    <span class="badge bg-${levelColor}">
                                        ${template.level}
                                    </span>
                                    <span class="badge bg-secondary ms-1">
                                        ${template.duration}
                                    </span>
                                </div>
                                <p class="card-text small">
                                    <i class="fas fa-bullseye me-1"></i>
                                    تمرکز: ${template.focus}
                                </p>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-primary btn-sm">
                                        <i class="fas fa-play me-1"></i>اجرا
                                    </button>
                                    <button class="btn btn-outline-secondary btn-sm">
                                        <i class="fas fa-user-plus me-1"></i>اختصاص
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                container.insertAdjacentHTML('beforeend', templateHTML);
            });
        }

        function createProgressChart() {
            const ctx = document.getElementById('coach-progress-chart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['هفته ۱', 'هفته ۲', 'هفته ۳', 'هفته ۴', 'هفته ۵', 'هفته ۶'],
                    datasets: [{
                        label: 'میانگین پیشرفت ورزشکاران',
                        data: [65, 70, 75, 80, 85, 90],
                        backgroundColor: [
                            'rgba(75, 181, 67, 0.7)',
                            'rgba(75, 181, 67, 0.7)',
                            'rgba(75, 181, 67, 0.7)',
                            'rgba(75, 181, 67, 0.7)',
                            'rgba(75, 181, 67, 0.7)',
                            'rgba(75, 181, 67, 0.7)'
                        ],
                        borderColor: [
                            '#4bb543',
                            '#4bb543',
                            '#4bb543',
                            '#4bb543',
                            '#4bb543',
                            '#4bb543'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateStats() {
            // آمار می‌تونن از سرور بیاین
            document.getElementById('total-athletes').textContent = coachData.athletes.length;
            document.getElementById('active-plans').textContent = coachData.athletes.length * 2; // فرضی
            document.getElementById('today-sessions').textContent = coachData.todayWorkouts.length;
            document.getElementById('goals-achieved').textContent = Math.floor(
                coachData.athletes.reduce((sum, a) => sum + a.progress, 0) / coachData.athletes.length
            );
        }
    </script>
    <!-- بعد از آمار کلی -->
<div class="card mb-4">
    <div class="card-header">
        <h5><i class="fas fa-money-bill-wave me-2 text-success"></i>درآمد و مالی</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-4">
                <div class="text-center p-3">
                    <h3 class="text-success" id="total-earned">۴,۲۵۰,۰۰۰</h3>
                    <p class="text-muted">درآمد کل (تومان)</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="text-center p-3">
                    <h3 id="monthly-earned">۱,۲۵۰,۰۰۰</h3>
                    <p class="text-muted">درآمد این ماه</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="text-center p-3">
                    <h3 id="pending-payment">۳۲۰,۰۰۰</h3>
                    <p class="text-muted">درآمد در انتظار</p>
                </div>
            </div>
        </div>
        
        <table class="table table-hover mt-3">
            <thead>
                <tr>
                    <th>ورزشکار</th>
                    <th>طرح</th>
                    <th>مبلغ ماهانه</th>
                    <th>وضعیت پرداخت</th>
                    <th>تاریخ بعدی</th>
                </tr>
            </thead>
            <tbody id="payment-list">
                <!-- لیست پرداخت‌ها -->
            </tbody>
        </table>
    </div>
</div>
</body>

</html>